<?xml version="1.0" encoding="UTF-8"?>
<datamodel name="IP" version="2.0">
    <object name="IP.Diagnostics.X_ADB_Report." access="readOnly" minEntries="1" maxEntries="1" set="QoeDiagnosticsReport.sh">
        <description>
        This object allows to configure the report of multiple IP diagnostics tests, uploading the results to a remote server.
        The uploaded content is in XML format, and contains device information read from {{object|.DeviceInfo}}.
        The data upload is performed when all configured objects among {{object|.IP.Diagnostics.DownloadDiagnostics}}, {{object|.IP.Diagnostics.UploadDiagnostics}}, {{object|.IP.Diagnostics.TraceRoute}}, and {{object|.IP.Diagnostics.IPPing}} have finished their tests.
        When the upload is triggered, the CPE sends all test results collected.
        </description>
        <parameter name="Enable" access="readWrite">
            <description>Enable the report of test results.</description>
            <syntax>
                <boolean/>
                <default value="false"/>
            </syntax>
        </parameter>
        <parameter name="Interface" access="readWrite">
            <description>Interface to be used for uploading the report.</description>
            <syntax>
                <string>
                    <size minLength="0" maxLength="256"/>
                    <pathRef targetParent=".IP.Interface." refType="strong" targetType="row"/>
                </string>
            </syntax>
        </parameter>
        <parameter name="UploadURL" access="readWrite">
            <description>The URL where to upload the test results.
            The URL can contain some variables with curly braces {} notation, which will be replaced by the corresponding value before the data upload attempt:
: {sn}: the serial number ({{param|.DeviceInfo.SerialNumber}})
: {pc}: the product class ({{param|.DeviceInfo.ProductClass}})
: {oui}: the manufacturer OUI ({{param|.DeviceInfo.ManufacturerOUI}})
: {mac}: the base MAC address ({{param|.X_ADB_FactoryData.BaseMACAddress}})
: {time}: the current local time ({{param|.Time.CurrentLocalTime}})
            Example:
: http://file.server.com/qoe/Download/{oui}/{pc}/{sn}-{time}.xml
            </description>
            <syntax>
                <string>
                    <pattern value="https?://.+"/>
                    <pattern value="ftp://.+"/>
                </string>
            </syntax>
        </parameter>
        <parameter name="Upload" access="readWrite">
            <description>Trigger the data upload of the test results.</description>
            <syntax hidden="true">
                <boolean/>
                <default value="false"/>
            </syntax>
        </parameter>
        <parameter name="RetryNumber" access="readWrite">
            <description>Maximum number of attempts to retry a failed upload.</description>
            <syntax>
                <unsignedInt>
                    <range minInclusive="0" maxInclusive="5"/>
                </unsignedInt>
                <default value="0"/>
            </syntax>
        </parameter>
        <parameter name="RetryInterval" access="readWrite">
            <description>Time interval in {{units}} between two consecutive upload attempts.</description>
            <syntax>
                <unsignedInt>
                    <range minInclusive="1" maxInclusive="300"/>
                    <units value="seconds"/>
                </unsignedInt>
                <default value="60"/>
            </syntax>
        </parameter>
        <parameter name="TestList" access="readWrite">
            <description>Coma separated list of test to do</description>
            <syntax>
                <string>
                  <size minLength="0" maxLength="256"/>
                </string>
            </syntax>
        </parameter>
        <parameter name="LastUploadStatus" access="readOnly">
            <description>The result status of the last data upload attempt.</description>
            <syntax>
                <string>
                    <enumeration value="None"/>
                    <enumeration value="Completed"/>
                    <enumeration value="Error"/>
                </string>
                <default value="None"/>
            </syntax>
        </parameter>
        <parameter name="LastUploadTime" access="readOnly">
            <description>The time of the last successfull data upload.</description>
            <syntax>
                <dateTime/>
                <default value="0001-01-01T00:00:00Z"/>
            </syntax>
        </parameter>
        <parameter name="LastUploadErrorTime" access="readOnly">
            <description>The time of the last failed data upload.</description>
            <syntax>
                <dateTime/>
                <default value="0001-01-01T00:00:00Z"/>
            </syntax>
        </parameter>
        <parameter name="Username" access="readWrite">
            <description>Username to access the upload file server.</description>
            <syntax>
                <string>
                    <size minLength="0" maxLength="64"/>
                </string>
            </syntax>
        </parameter>
        <parameter name="Password" access="readWrite">
            <description>Password to access the upload file server.</description>
            <syntax>
                <string>
                    <size minLength="0" maxLength="64"/>
                </string>
            </syntax>
        </parameter>
        <parameter name="UserInfo" access="readWrite">
            <description>User information to be added in uploaded report file.</description>
            <syntax>
                <string>
                    <size minLength="0" maxLength="1024"/>
                </string>
            </syntax>
        </parameter>
        <parameter name="CallerInfo" access="readWrite">
            <description>Caller information to be added in uploaded report file.</description>
            <syntax>
                <string>
                    <size minLength="0" maxLength="1024"/>
                </string>
            </syntax>
        </parameter>
    </object>
</datamodel>
