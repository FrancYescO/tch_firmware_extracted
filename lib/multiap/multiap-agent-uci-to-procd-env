
config_load multiap

  config_get map_agent_macaddress agent macaddress
  if [ -n "$map_agent_macaddress" ]; then
      procd_append_param env MAP_AGENT_MACADDRESS=$map_agent_macaddress
  fi

  config_get al_entity_interfaces al_entity interfaces
  if [ -n "$al_entity_interfaces" ]; then
      procd_append_param env AL_ENTITY_INTERFACES=$al_entity_interfaces
  fi

  config_get al_entity_topology_discovery_interval al_entity topology_discovery_interval
  if [ -n "$al_entity_topology_discovery_interval" ]; then
      procd_append_param env AL_ENTITY_TOPOLOGY_DISCOVERY_INTERVAL=$al_entity_topology_discovery_interval
  fi

  config_get al_entity_lldp_bridge_discovery_interval al_entity lldp_bridge_discovery_interval
  if [ -n "$al_entity_lldp_bridge_discovery_interval" ]; then
      procd_append_param env AL_ENTITY_LLDP_BRIDGE_DISCOVERY_ENV_INTERVAL=$al_entity_lldp_bridge_discovery_interval
  fi

  config_get map_exclusion_interface al_entity exclusion_iface
  if [ -n "$map_exclusion_interface" ]; then
      procd_append_param env MAP_EXCLUSION_IFACE_LIST=$map_exclusion_interface
  fi

  config_get map_agent_bsslist agent bss_list
  if [ -n "$map_agent_bsslist" ]; then
      procd_append_param env MAP_AGENT_BSSLIST=$map_agent_bsslist
  fi

  config_get map_agent_fronthaul_list agent fronthaul_list
  if [ -n "$map_agent_fronthaul_list" ]; then
      procd_append_param env MAP_AGENT_FRONTHAUL_LIST=$map_agent_fronthaul_list
  fi

  config_get map_agent_backhaul_list agent backhaul_list
  if [ -n "$map_agent_backhaul_list" ]; then
      procd_append_param env MAP_AGENT_BACKHAUL_LIST=$map_agent_backhaul_list
  fi

  config_get map_agent_hidden_backhaul agent hidden_backhaul
  if [ -n "$map_agent_hidden_backhaul" ]; then
      procd_append_param env MAP_AGENT_HIDDEN_BACKHAUL=$map_agent_hidden_backhaul
  fi

  config_get map_agent_skip_backhaul_wps_check agent skip_backhaul_wps_check
  if [ -n "$map_agent_skip_backhaul_wps_check" ]; then
      procd_append_param env MAP_AGENT_SKIP_BACKHAUL_WPS_CHECK=$map_agent_skip_backhaul_wps_check
  fi

  config_get map_agent_beacon_metrics_timeout agent beacon_metrics_timeout
  if [ -n "$map_agent_beacon_metrics_timeout" ]; then
      procd_append_param env MAP_AGENT_BEACON_METRICS_INTERVAL=$map_agent_beacon_metrics_timeout
  fi

  config_get map_agent_beacon_metrics_max_duration agent beacon_metrics_max_duration_ms
  if [ -n "$map_agent_beacon_metrics_max_duration" ]; then
      procd_append_param env MAP_AGENT_BEACON_METRICS_MAX_DURATION=$map_agent_beacon_metrics_max_duration
  fi

  config_get map_enable_bss_on_M2 agent enable_bss_on_M2
  if [ -n "$map_enable_bss_on_M2" ]; then
      procd_append_param env MAP_ENABLE_BSS_ON_M2=$map_enable_bss_on_M2
  fi
  config_get map_agent_overide_acs agent overide_acs
  if [ -n "$map_agent_overide_acs" ]; then
      procd_append_param env MAP_AGENT_OVERRIDE_ACS=$map_agent_overide_acs
  fi

  config_get map_agent_library_log_level logging library
  if [ -n "$map_agent_library_log_level" ]; then
      procd_append_param env MAP_LIB_LOG_LEVEL=$map_agent_library_log_level
  fi

  config_get map_agent_ieee1905_log_level logging ieee1905
  if [ -n "$map_agent_ieee1905_log_level" ]; then
      procd_append_param env MAP_1905_LOG_LEVEL=$map_agent_ieee1905_log_level
  fi

  config_get map_agent_log_level logging agent 
  if [ -n "$map_agent_log_level" ]; then
      procd_append_param env MAP_AGENT_LOG_LEVEL=$map_agent_log_level
  fi

  config_get map_controller_log_level logging controller
  if [ -n "$map_controller_log_level" ]; then
      procd_append_param env MAP_CONTROLLER_LOG_LEVEL=$map_controller_log_level
  fi

  config_get map_controller_vendor_ipc_log_level logging vendor_ipc
  if [ -n "$map_controller_vendor_ipc_log_level" ]; then
      procd_append_param env MAP_VENDOR_IPC_LOG_LEVEL=$map_controller_vendor_ipc_log_level
  fi

  config_get map_agent_wireless_bh_enable_time agent wireless_bh_enable_timeout
  if [ -n "$map_agent_wireless_bh_enable_time" ]; then
      procd_append_param env MAP_AGENT_WIRELESS_BH_ENABLE_TIMEOUT=$map_agent_wireless_bh_enable_time
  fi

  config_get map_agent_allow_tx_power_setting agent allow_tx_power_setting
  if [ -n "$map_agent_allow_tx_power_setting" ]; then
      procd_append_param env MAP_AGENT_ALLOW_TX_POWER_SETTING=$map_agent_allow_tx_power_setting
  fi

  config_get map_link_met_abs_encode_enabled al_entity link_met_abs_encoding_enabled
  if [ -n "$map_link_met_abs_encode_enabled" ]; then
      procd_append_param env MAP_LINK_MET_ABS_ENCODE_ENABLED=$map_link_met_abs_encode_enabled
  fi

# Set Island Protection config as env

  config_get map_island_protection_enabled island_protection enabled
  if [ -n "$map_island_protection_enabled" ]; then
      procd_append_param env MAP_AGENT_ISLAND_PROTECTION_ENABLED=$map_island_protection_enabled
  fi

  config_get map_island_protection_bh_link_detection_interval island_protection bh_link_detection_interval
  if [ -n "$map_island_protection_bh_link_detection_interval" ]; then
      procd_append_param env MAP_AGENT_BH_LINK_DETECTION_INTERVAL=$map_island_protection_bh_link_detection_interval
  fi

# Set STP Path Cost Adaptation as env

  config_get map_stp_pc_adapt_enabled stp_pc_adapt enabled
  if [ -n "$map_stp_pc_adapt_enabled" ]; then
      procd_append_param env MAP_AGENT_STP_PC_ADAPT_ENABLED=$map_stp_pc_adapt_enabled
  fi

  config_get map_stp_pc_window_size stp_pc_adapt window_size
  if [ -n "$map_stp_pc_window_size" ]; then
      procd_append_param env MAP_AGENT_STP_PC_ADAPT_WINDOW_SIZE=$map_stp_pc_window_size
  fi

  config_get map_stp_pc_adapt_threshold stp_pc_adapt threshold
  if [ -n "$map_stp_pc_adapt_threshold" ]; then
      procd_append_param env MAP_AGENT_STP_PC_ADAPT_THRESHOLD=$map_stp_pc_adapt_threshold
  fi

  config_get map_stp_pc_adapt_trigger_timer stp_pc_adapt trigger_timer
  if [ -n "$map_stp_pc_adapt_trigger_timer" ]; then
      procd_append_param env MAP_AGENT_STP_PC_ADAPT_TRIGGER_TIMER=$map_stp_pc_adapt_trigger_timer
  fi

  config_get map_stp_pc_adapt_sampling_timer stp_pc_adapt sampling_timer
  if [ -n "$map_stp_pc_adapt_sampling_timer" ]; then
      procd_append_param env MAP_AGENT_STP_PC_ADAPT_SAMPLE_TIME=$map_stp_pc_adapt_sampling_timer
  fi

## Set WEE-BHS module config as env

  config_get wee_bhs_uplink_rssi_threshold wee_bhs uplink_rssi_threshold
  if [ -n "$wee_bhs_uplink_rssi_threshold" ]; then
      procd_append_param env WEE_BHS_UPLINK_RSSI_THRESHOLD=$wee_bhs_uplink_rssi_threshold
  fi

  config_get val agent copy_bh_credential
  if [ -n $val ]; then
     procd_append_param env MAP_AGENT_COPY_BACKHAUL_INFO=$val
  fi

  config_get val agent controller_reached_once
  if [ -n $val ]; then
      procd_append_param env MAP_AGENT_CONTROLLER_REACHED_ONCE=$val
  fi

  config_get val wee_bhs enabled
  if [ -n "$val" ]; then
      procd_append_param env WEE_BHS_ENABLED="$val"
  fi

  config_get val wee_bhs steer_timeout
  if [ -n "$val" ]; then
      procd_append_param env WEE_BHS_STEER_TIMEOUT="$val"
  fi

  config_get val agent neighbour_deletion_timeout
  if [ -n "$val" ]; then
      procd_append_param env MAP_AGENT_NEIGHBOUR_DELETION_TIMEOUT="$val"
  fi

  config_get val agent dead_ale_detection_interval
  if [ -n "$val" ]; then
      procd_append_param env MAP_AGENT_DEAD_ALE_DETECTION_INTERVAL="$val"
  fi

  config_get val agent controller_deletion_timeout
  if [ -n "$val" ]; then
      procd_append_param env MAP_AGENT_CONTROLLER_DELETION_TIMEOUT="$val"
  fi

  config_get val agent topology_query_interval
  if [ -n "$val" ]; then
      procd_append_param env MAP_AGENT_TOPOLOGY_QUERY_INTERVAL="$val"
  fi

  config_get val agent endpoint_detecion_interval
  if [ -n "$val" ]; then
      procd_append_param env MAP_AGENT_ENDPOINT_DETECTION_INTERVAL=$val
  fi

  config_get val credential_type enable
  if [ -n "$val" ]; then
      procd_append_param env MAP_CONTROLLER_CRED_TYPE_ENABLE="$val"
  fi

  config_get map_agent_home_list agent home_list
  if [ -n "$map_agent_home_list" ]; then
      procd_append_param env MAP_AGENT_HOME_LIST=$map_agent_home_list
  fi

  config_get map_agent_guest_list agent guest_list
  if [ -n "$map_agent_guest_list" ]; then
      procd_append_param env MAP_AGENT_GUEST_LIST=$map_agent_guest_list
  fi

  config_get map_agent_bh_list agent bh_list
  if [ -n "$map_agent_bh_list" ]; then
      procd_append_param env MAP_AGENT_BH_LIST=$map_agent_bh_list
  fi

  config_get al_entity_multiap_profile al_entity multiap_profile
  if [ -n "$al_entity_multiap_profile" ]; then
      procd_append_param env AL_ENTITY_MULTIAP_PROFILE=$al_entity_multiap_profile
  fi

  config_get map_agent_backbone_event agent backbone_event
  if [ -n "$map_agent_backbone_event" ]; then
      procd_append_param env MAP_AGENT_BACKBONE_EVENT=$map_agent_backbone_event
  fi

  config_get map_agent_uplink_iface_list agent uplink_iface_list
  if [ -n "$map_agent_uplink_iface_list" ]; then
      procd_append_param env MAP_AGENT_UPLINK_IFACE_LIST=$map_agent_uplink_iface_list
  fi

  config_get map_agent_usm_report_interval agent unassoc_sta_metrics_report_interval
  if [ -n "$map_agent_usm_report_interval" ]; then
      procd_append_param env MAP_AGENT_UNASSOC_REPORT_INTERVAL=$map_agent_usm_report_interval
  fi

  # Set Traffic Separation config as env

  config_get map_traffic_separation_enabled traffic_separation enabled
  if [ -n "$map_traffic_separation_enabled" ]; then
      procd_append_param env MAP_TRAFFIC_SEPARATION_ENABLED=$map_traffic_separation_enabled
  fi

  config_get map_traffic_separation_primary_fh_list traffic_separation primary_fh_list
  if [ -n "$map_traffic_separation_primary_fh_list" ]; then
      procd_append_param env MAP_TRAFFIC_SEPARATION_PRIMARY_FH_LIST=$map_traffic_separation_primary_fh_list
  fi

  config_get map_traffic_separation_max_vlan traffic_separation max_vlan
  if [ -n "$map_traffic_separation_max_vlan" ]; then
      procd_append_param env MAP_TRAFFIC_SEPARATION_MAX_VLAN=$map_traffic_separation_max_vlan
  fi

  ########## ACS allowed channel update ################################
  config_get map_agent_acs_allowed_ch_update agent acs_allowed_ch_update
  if [ -n "$map_agent_acs_allowed_ch_update" ]; then
      procd_append_param env MAP_AGENT_ACS_ALLOWED_CHANNEL_UPDATE_ENABLED=$map_agent_acs_allowed_ch_update
  fi

  ########## Telia allowed channel scan interval ################################
  config_get map_agent_env_channel_scan_interval agent ch_scan_interval
  if [ -n "$map_agent_env_channel_scan_interval" ]; then
      procd_append_param env MAP_AGENT_CHANNEL_SCAN_INTERVAL=$map_agent_env_channel_scan_interval
  fi

  config_get map_certification_enabled agent certification_enabled
  if [ -n "$map_certification_enabled" ]; then
      procd_append_param env MAP_AGENT_CERTIFICATION_ENABLED=$map_certification_enabled
  fi

  config_get map_btm_request_validity_interval agent btm_request_validity_interval
  if [ -n "$map_btm_request_validity_interval" ]; then
      procd_append_param env MAP_AGENT_BTM_RQT_VALIDITY_INTERVAL=$map_btm_request_validity_interval
  fi
