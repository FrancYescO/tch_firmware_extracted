
config_load multiap

  config_get map_agent_macaddress agent macaddress
  if [ -n "$map_agent_macaddress" ]; then
      procd_append_param env MAP_AGENT_MACADDRESS=$map_agent_macaddress
  fi

  config_get al_entity_interfaces al_entity interfaces
  if [ -n "$al_entity_interfaces" ]; then
      procd_append_param env AL_ENTITY_INTERFACES=$al_entity_interfaces
  fi

  config_get al_entity_topology_discovery_interval al_entity topology_discovery_interval
  if [ -n "$al_entity_topology_discovery_interval" ]; then
      procd_append_param env AL_ENTITY_TOPOLOGY_DISCOVERY_INTERVAL=$al_entity_topology_discovery_interval
  fi

  config_get al_entity_lldp_bridge_discovery_interval al_entity lldp_bridge_discovery_interval
  if [ -n "$al_entity_lldp_bridge_discovery_interval" ]; then
      procd_append_param env AL_ENTITY_LLDP_BRIDGE_DISCOVERY_ENV_INTERVAL=$al_entity_lldp_bridge_discovery_interval
  fi

  config_get map_agent_bsslist agent bss_list
  if [ -n "$map_agent_bsslist" ]; then
      procd_append_param env MAP_AGENT_BSSLIST=$map_agent_bsslist
  fi

  config_get map_agent_fronthaul_list agent fronthaul_list
  if [ -n "$map_agent_fronthaul_list" ]; then
      procd_append_param env MAP_AGENT_FRONTHAUL_LIST=$map_agent_fronthaul_list
  fi

  config_get map_agent_backhaul_list agent backhaul_list
  if [ -n "$map_agent_backhaul_list" ]; then
      procd_append_param env MAP_AGENT_BACKHAUL_LIST=$map_agent_backhaul_list
  fi

  config_get map_agent_hidden_backhaul agent hidden_backhaul
  if [ -n "$map_agent_hidden_backhaul" ]; then
      procd_append_param env MAP_AGENT_HIDDEN_BACKHAUL=$map_agent_hidden_backhaul
  fi

  config_get map_agent_skip_backhaul_wps_check agent skip_backhaul_wps_check
  if [ -n "$map_agent_skip_backhaul_wps_check" ]; then
      procd_append_param env MAP_AGENT_SKIP_BACKHAUL_WPS_CHECK=$map_agent_skip_backhaul_wps_check
  fi

  config_get map_agent_beacon_metrics_timeout agent beacon_metrics_timeout
  if [ -n "$map_agent_beacon_metrics_timeout" ]; then
      procd_append_param env MAP_AGENT_BEACON_METRICS_INTERVAL=$map_agent_beacon_metrics_timeout
  fi

  config_get map_agent_beacon_metrics_max_duration agent beacon_metrics_max_duration_ms
  if [ -n "$map_agent_beacon_metrics_max_duration" ]; then
      procd_append_param env MAP_AGENT_BEACON_METRICS_MAX_DURATION=$map_agent_beacon_metrics_max_duration
  fi

  config_get map_agent_overide_acs agent overide_acs
  if [ -n "$map_agent_overide_acs" ]; then
      procd_append_param env MAP_AGENT_OVERRIDE_ACS=$map_agent_overide_acs
  fi

  config_get map_agent_library_log_level logging library
  if [ -n "$map_agent_library_log_level" ]; then
      procd_append_param env MAP_LIB_LOG_LEVEL=$map_agent_library_log_level
  fi

  config_get map_agent_ieee1905_log_level logging ieee1905
  if [ -n "$map_agent_ieee1905_log_level" ]; then
      procd_append_param env MAP_1905_LOG_LEVEL=$map_agent_ieee1905_log_level
  fi

  config_get map_agent_log_level logging agent 
  if [ -n "$map_agent_log_level" ]; then
      procd_append_param env MAP_AGENT_LOG_LEVEL=$map_agent_log_level
  fi

  config_get map_controller_log_level logging controller
  if [ -n "$map_controller_log_level" ]; then
      procd_append_param env MAP_CONTROLLER_LOG_LEVEL=$map_controller_log_level
  fi

  config_get map_controller_vendor_ipc_log_level logging vendor_ipc
  if [ -n "$map_controller_vendor_ipc_log_level" ]; then
      procd_append_param env MAP_VENDOR_IPC_LOG_LEVEL=$map_controller_vendor_ipc_log_level
  fi

  config_get map_agent_wireless_bh_enable_time agent wireless_bh_enable_timeout
  if [ -n "$map_agent_wireless_bh_enable_time" ]; then
      procd_append_param env MAP_AGENT_WIRELESS_BH_ENABLE_TIMEOUT=$map_agent_wireless_bh_enable_time
  fi

  config_get map_agent_allow_tx_power_setting agent allow_tx_power_setting
  if [ -n "$map_agent_allow_tx_power_setting" ]; then
      procd_append_param env MAP_AGENT_ALLOW_TX_POWER_SETTING=$map_agent_allow_tx_power_setting
  fi

  config_get map_link_met_abs_encode_enabled al_entity link_met_abs_encoding_enabled
  if [ -n "$map_link_met_abs_encode_enabled" ]; then
      procd_append_param env MAP_LINK_MET_ABS_ENCODE_ENABLED=$map_link_met_abs_encode_enabled
  fi

# Set Island Protection config as env

  config_get map_island_protection_enabled island_protection enabled
  if [ -n "$map_island_protection_enabled" ]; then
      procd_append_param env MAP_AGENT_ISLAND_PROTECTION_ENABLED=$map_island_protection_enabled
  fi

  config_get map_island_protection_bh_link_detection_interval island_protection bh_link_detection_interval
  if [ -n "$map_island_protection_bh_link_detection_interval" ]; then
      procd_append_param env MAP_AGENT_BH_LINK_DETECTION_INTERVAL=$map_island_protection_bh_link_detection_interval
  fi

## Set WEE-BHS module config as env

  config_get wee_bhs_uplink_rssi_threshold wee_bhs uplink_rssi_threshold
  if [ -n "$wee_bhs_uplink_rssi_threshold" ]; then
      procd_append_param env WEE_BHS_UPLINK_RSSI_THRESHOLD=$wee_bhs_uplink_rssi_threshold
  fi

  config_get val agent copy_bh_credential
  if [ -n $val ]; then
     procd_append_param env MAP_AGENT_COPY_BACKHAUL_INFO=$val
  fi

  config_get val island_protection controller_reached_once
  if [ -n $val ]; then
      procd_append_param env MAP_AGENT_CONTROLLER_REACHED_ONCE=$val
  fi

  config_get val wee_bhs enabled
  if [ -n "$val" ]; then
      procd_append_param env WEE_BHS_ENABLED="$val"
  fi

  config_get val wee_bhs steer_timeout
  if [ -n "$val" ]; then
      procd_append_param env WEE_BHS_STEER_TIMEOUT="$val"
  fi

  config_get val agent neighbour_deletion_timeout
  if [ -n "$val" ]; then
      procd_append_param env MAP_AGENT_NEIGHBOUR_DELETION_TIMEOUT="$val"
  fi

  config_get val agent dead_ale_detection_interval
  if [ -n "$val" ]; then
      procd_append_param env MAP_AGENT_DEAD_ALE_DETECTION_INTERVAL="$val"
  fi

  config_get val agent controller_deletion_timeout
  if [ -n "$val" ]; then
      procd_append_param env MAP_AGENT_CONTROLLER_DELETION_TIMEOUT="$val"
  fi

  config_get val agent topology_query_interval
  if [ -n "$val" ]; then
      procd_append_param env MAP_AGENT_TOPOLOGY_QUERY_INTERVAL="$val"
  fi

  config_get val agent endpoint_detecion_interval
  if [ -n "$val" ]; then
      procd_append_param env MAP_AGENT_ENDPOINT_DETECTION_INTERVAL=$val
  fi

  config_get val credential_type enable
  if [ -n "$val" ]; then
      procd_append_param env MAP_CONTROLLER_CRED_TYPE_ENABLE="$val"
  fi

  config_get map_agent_home_list agent home_list
  if [ -n "$map_agent_home_list" ]; then
      procd_append_param env MAP_AGENT_HOME_LIST=$map_agent_home_list
  fi

  config_get map_agent_guest_list agent guest_list
  if [ -n "$map_agent_guest_list" ]; then
      procd_append_param env MAP_AGENT_GUEST_LIST=$map_agent_guest_list
  fi

  config_get map_agent_bh_list agent bh_list
  if [ -n "$map_agent_bh_list" ]; then
      procd_append_param env MAP_AGENT_BH_LIST=$map_agent_bh_list
  fi
