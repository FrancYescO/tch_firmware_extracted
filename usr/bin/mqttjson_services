#!/usr/bin/env lua

local mqttjson = require('mqttjson_services')
local log = require("tch.logger").new("mqtterrorhandler", 6)

local function get_traceback(err)
  log:error("Mqttjson_services exit due to " .. err)
  for line in string.gmatch(debug.traceback(), "([^\n]*)\n") do
    log:error(line)
  end
end

xpcall(mqttjson.loadModule, get_traceback)
