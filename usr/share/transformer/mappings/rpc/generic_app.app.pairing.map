local pairing_map = {
  objectType = {
    name = "rpc.generic_app.app.pairing.",
    access = "readOnly",
    description = "object for smartapp pairing",
    minEntries = 1,
    maxEntries = 1,
    parameters = {
      Enabled = {
        access = "readWrite",
        type = "boolean",
        description = "Set to 1 to initiate App pairing",
      },
    },
  },
}

pairing_map.get = {
  Enabled = "0"
}

pairing_map.set = {
  Enabled = function(mapping, _, enable)
    enable = enable=="1"
    mapping._pairing_enable = {enable=enable}
    if enable then
       commitapply:newset("rpc.generic_app.app.pairing.Enabled")
    end
  end
}

register(pairing_map)
