-- Automatically generated from Device:2.10
-- using generator version 2.3
local Device_DHCPv4_Client_i_SentOption_i_ = {
  objectType = {
    name = "Device.DHCPv4.Client.{i}.SentOption.{i}.",
    access = "readOnly",
    numEntriesParameter = "SentOptionNumberOfEntries",
    enableParameter = "Enable",
    minEntries = 0,
    maxEntries = math.huge,
    aliasParameter = "Alias",
    parameters = {
      Enable = {
        access = "readOnly", -- readWrite currently not supported
        type = "boolean",
        default = "false",
      },
      Alias = {
        access = "readWrite",
        activeNotify = "canDeny",
        type = "string",
        max  = "64",
      },
      Tag = {
        access = "readOnly", --Implementing as ReadOnly, since only one Tag(60) is currently implemented.
        type = "unsignedInt",
        range = {
          {
            min = "1",
            max = "254",
          },
        },
      },
      Value = {
        access = "readWrite",
        type = "string", --Type changed from HexBinary to String, as HexBinary is not supported by Transformer
        min = "0",
        max = "255",
        default = "",
      },
    }
  }
}
-- function aliases
local uciHelper = mapper("ucihelper")
local networkBinding = { config = "network", option = "vendorid"}
local isConfigChanged = false
local string = string
local function getUciParam(sectionName)
  networkBinding.sectionname = sectionName
  return uciHelper.get_from_uci(networkBinding)
end

Device_DHCPv4_Client_i_SentOption_i_.entries = function(mapping, parentKey)
  local sentOpt60 = getUciParam(parentKey)
  return sentOpt60 =="" and {} or { parentKey }
end

local function stringToHex(str)
  return (str:gsub('.', function (c)
    return string.format('%02x', string.byte(c))
  end))
end

Device_DHCPv4_Client_i_SentOption_i_.get = {
  Enable = '1',
  Tag = '60', --only Tag 60 is currently implemented.
  Value = function(mapping, param, key)
    return stringToHex(getUciParam(key))
  end
}

Device_DHCPv4_Client_i_SentOption_i_.getall = function(mapping, key)
  local allValues= {
    Enable = '1',
    Tag = '60', --only Tag 60 is currently implemented.
    Value = stringToHex(getUciParam(key))
  }
  return allValues
end

Device_DHCPv4_Client_i_SentOption_i_.set = {
  Value = function(mapping, param, value, key)
    networkBinding.sectionname = key
    return uciHelper.set_on_uci(networkBinding, value, commitapply)
  end,
}

Device_DHCPv4_Client_i_SentOption_i_.commit = function()
  if isConfigChanged then
    uciHelper.commit(networkBinding)
    isConfigChanged = false
  end
end

Device_DHCPv4_Client_i_SentOption_i_.revert = function()
  if isConfigChanged then
    uciHelper.revert(networkBinding)
    isConfigChanged = false
  end
end

register(Device_DHCPv4_Client_i_SentOption_i_)

