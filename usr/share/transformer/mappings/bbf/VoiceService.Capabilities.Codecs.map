local lfs = require("lfs")

if lfs.attributes("/etc/config/mmpbx", "mode") ~= "file" then
    return
end

local tr104Helper = require("transformer.shared.tr104helper")
local codecHelper = require("transformer.shared.codechelper")

local Multi_Services_VoiceService_i_Capabilities_Codecs_i_ = {
    objectType = {
        name = "#ROOT.Services.VoiceService.{i}.Capabilities.Codecs.{i}.",
        access = "readOnly",
        minEntries = 0,
        maxEntries = math.huge,
        parameters = {
            EntryID = {
                access = "readOnly",
                activeNotify = "canDeny",
                type = "unsignedInt",
                range = {
                    {
                        min = "1",
                    },
                },
                description = "Unique identifier for each entry in this table",
            },
            Codec = {
                access = "readOnly",
                activeNotify = "canDeny",
                type = "string",
                max = "64",
                enumeration = {
                    "G.711MuLaw",
                    "G.711ALaw",
                    "G.726",
                    "G.729",
                    "G.729a",
                    "G.729e",
                    "G.728",
                    "G.723.1",
                    "G.722",
                    "G.722.1",
                    "G.722.2",
                    "GSM-FR",
                    "GSM-HR",
                    "GSM-EFR",
                    "iLBC",
                },
                description = "Identifier of the codec type",
            },
            BitRate = {
                access = "readOnly",
                activeNotify = "canDeny",
                type = "unsignedInt",
                description = "is the number of bits that are conveyed or processed per unit of time",
            },
            PacketizationPeriod = {
                access = "readOnly",
                activeNotify = "canDeny",
                list = true,
                type = "string",
                max = "64",
                description = "is the duration of time (expressed in milliseconds) between two RTP packets",
            },
            SilenceSuppression = {
                access = "readOnly",
                activeNotify = "canDeny",
                type = "boolean",
                description = "Indicates support for silence suppression for this codec",
            },
        }
    }
}

Multi_Services_VoiceService_i_Capabilities_Codecs_i_.entries = codecHelper.getCodecEntries()
Multi_Services_VoiceService_i_Capabilities_Codecs_i_.getall = codecHelper.getAllCodecParams(Multi_Services_VoiceService_i_Capabilities_Codecs_i_)
Multi_Services_VoiceService_i_Capabilities_Codecs_i_.get = codecHelper.getCodecParam()

tr104Helper.registerObject("Multi_Services_VoiceService_i_Capabilities_Codecs_i_", Multi_Services_VoiceService_i_Capabilities_Codecs_i_, register)
