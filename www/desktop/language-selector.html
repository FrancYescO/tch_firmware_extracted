<!--
  (C) 2017 NETDUMA Software
  Kian Cross <kian.cross@netduma.com>
--> <link rel="import" href="/custom-elements/polymer/polymer.html"> <link rel="import" href="/custom-elements/paper-menu-button/paper-menu-button.html"> <link rel="import" href="/custom-elements/paper-icon-button/paper-icon-button.html"> <link rel="import" href="/custom-elements/paper-listbox/paper-listbox.html"> <link rel="import" href="/custom-elements/paper-item/paper-item.html"> <link rel="import" href="/custom-elements/paper-input/paper-input.html"> <link rel="import" href="/nd-css/duma-styles.html"> <dom-module id="language-selector"> <template> <style is="custom-style" include="duma-theme"> :host {
        display: inline-block;
      }
      paper-menu-button {
        padding: 0;
        margin: 0;
      }

      paper-input {
        padding-left: 16px;
        padding-right: 16px;
      }

      .dropdown-content {
        margin-right: 16px;
        z-index: 1;
        position: relative;
      }
      ::content iron-dropdown
        padding-bottom: 16px;
        z-index: 999;
      } </style> <paper-menu-button> <paper-icon-button icon="icons:language" class="dropdown-trigger"></paper-icon-button> <div class="dropdown-content"> <paper-listbox attr-for-selected="value" selected="{{selectedLanguage}}" selected-item="{{selectedItem}}"> <template is="dom-repeat" items="[[_languages]]" as="language" sort="_sortLanguages"> <paper-item class="language" value="[[language.value]]" on-tap="_onLanguageClick">[[language.name]]</paper-item> </template> </paper-listbox> </div> </paper-menu-button> </template> <script> Polymer({
      is: "language-selector",

      properties: {
        selectedLanguage: {
          type: String,
          observer: "_onSelectedLanguageChange"
        },

        availableLanguages: {
          type: Array,
          observer: "_availableLanguagesChange"
        },
      },

      _languageClick: false,

      _languageMap: {
        ENU: "English",
        DEU: "Deutsch",
        CHS: "中文",
        JPN: "日本語",
        KOR: " 한국어",
        RUS: "Русский",
        ESP: "Español",
        PLK: "Polski",
        FRA: "Français",
        ITA: "Italiano",
        SVE: "Svenska",
        DAN: "Dansk",
        NLD: "Nederlands",
        ELL: "Ελληνικά",
        NOR: "Norsk",
        CSY: "Čeština",
        SLV: "Slovenščina",
        PTB: "Português",
        HUN: "Magyar",
        ROM: "Română",
        FIN: "Suomi",
        SKY: "Slovenčina",
        TRK: "Türkçe",
        CHT: "繁體中文"
      },

      _availableLanguagesChange: function () {

        var languages = [];

        var availableLanguages = this.availableLanguages;

        for (var i = 0; i < availableLanguages.length; i++) {
          var availableLanguage = availableLanguages[i];

          if (!this._languageMap[availableLanguage]) {
            Error("No language name corresponding to language ID '" + availableLanguage + "'.");
          }

          languages.push({
            name: this._languageMap[availableLanguage],
            value: availableLanguage
          });
        }

        this._languages = languages;
      },

      _sortLanguages: function (country1, country2) {
        if (country1.name.toLowerCase() > country2.name.toLowerCase()) {
          return 1

        } else if (country1.name.toLowerCase() < country2.name.toLowerCase()) {
          return -1;

        } else {
          return 0;
        }
      },

      _onLanguageClick: function () {
        this._languageClick = true;
      },

      _onSelectedLanguageChange: function () {
        if (this._languageClick) {
          this._languageClick = false;
          this.fire("user-language-change");
        }
      }
    }); </script> </dom-module> 