<!--
  (C) 2021 NETDUMA Software
  Luke Meppem
--> <link rel="import" href="/custom-elements/polymer/polymer.html?v=<%= dumaos_version %>&lang=<%= lang %>&theme=<%= current_theme %>&themeVersion=<%= current_theme_version %>"> <link rel="import" href="../paper-icon-button/paper-icon-button.html?v=<%= dumaos_version %>&lang=<%= lang %>&theme=<%= current_theme %>&themeVersion=<%= current_theme_version %>"> <link rel="import" href="../iron-icons/iron-icons.html?v=<%= dumaos_version %>&lang=<%= lang %>&theme=<%= current_theme %>&themeVersion=<%= current_theme_version %>"> <link rel="import" href="../paper-tooltip/paper-tooltip.html?v=<%= dumaos_version %>&lang=<%= lang %>&theme=<%= current_theme %>&themeVersion=<%= current_theme_version %>"> <dom-module is="duma-hidden"> ​ <template> <style is="custom-style"> .container {
        display: flex;
        flex-direction: row;
        align-items: center;
      }
      .hide-button {
        margin-top: -8px;
        opacity: 0.39;
      }
      :host[visible] .hide-button {
        opacity: 1;
      } </style> <div class="container"> <div class="content-wrapper"> <template is="dom-if" if="[[visible]]" restamp> <content select="[show]"></content> </template> <template is="dom-if" if="[[!visible]]" restamp> <content select="[hide]"></content> <template is="dom-if" if="[[hiddenText]]"> <span></span> </template> </template> </div> <paper-icon-button id$="duma-hidden-button-[[ariaId]]" class="hide-button" icon="[[_getIcon(visible)]]" on-tap="toggle" aria-label$="[[_getText(visible)]]"></paper-icon-button> <paper-tooltip for$="duma-hidden-button-[[ariaId]]">[[_getText(visible)]]</paper-tooltip> </div> </template> <script> Polymer({
      is: "duma-hidden",

      properties: {
        // show the contents show or hide
        visible: {
          type: Boolean,
          value: false,
          notify: true,
          reflectToAttribute: true
        },

        // show text when hidden
        hiddenText: {
          type: String,
          value: null
        },

        // should the visibility state be handled manually, or automatically
        manual: {
          type: Boolean,
          value: false,
          reflectToAttribute: true
        },

        // aria id for unique tooltip ids
        ariaId: {
          type: Number,
          value: (_=0,()=>_++)
        },
      },

      _getText: function(visible){
        return visible ? "<%= i18n.hide %>" : "<%= i18n.show %>";
      },

      _getIcon: function(visible) {
        return visible ? "visibility" : "visibility-off";
      },

      toggle: function(){
        if(this.manual){
          this.fire("visible-tap");
        }else{
          this.visible = !this.visible;
        }
      },

    }); </script> ​ </dom-module> 