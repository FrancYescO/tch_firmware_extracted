JustGage=function(a){if(!a.id)return alert("Missing id parameter for gauge!"),!1;if(!document.getElementById(a.id))return alert('No element with id: "'+a.id+'" found!'),!1;this.config={id:a.id,title:a.title?a.title:"Title",titleFontColor:a.titleFontColor?a.titleFontColor:"#999999",value:a.value?a.value:0,valueFontColor:a.valueFontColor?a.valueFontColor:"#010101",min:a.min?a.min:0,max:a.max?a.max:100,showMinMax:null!=a.showMinMax?a.showMinMax:!0,gaugeWidthScale:a.gaugeWidthScale?a.gaugeWidthScale:
1,gaugeColor:a.gaugeColor?a.gaugeColor:"#edebeb",label:a.label?a.label:"",showInnerShadow:null!=a.showInnerShadow?a.showInnerShadow:!0,shadowOpacity:a.shadowOpacity?a.shadowOpacity:0.2,shadowSize:a.shadowSize?a.shadowSize:5,shadowVerticalOffset:a.shadowVerticalOffset?a.shadowVerticalOffset:3,levelColors:a.levelColors?a.levelColors:percentColors,levelColorsGradient:null!=a.levelColorsGradient?a.levelColorsGradient:!0,labelFontColor:a.labelFontColor?a.labelFontColor:"#b3b3b3",startAnimationTime:a.startAnimationTime?
a.startAnimationTime:700,startAnimationType:a.startAnimationType?a.startAnimationType:"\x3e",refreshAnimationTime:a.refreshAnimationTime?a.refreshAnimationTime:700,refreshAnimationType:a.refreshAnimationType?a.refreshAnimationType:"\x3e"};a.value>this.config.max&&(this.config.value=this.config.max);a.value<this.config.min&&(this.config.value=this.config.min);this.originalValue=a.value;this.canvas=Raphael(this.config.id,"100%","100%");a=1*getStyle(document.getElementById(this.config.id),"width").slice(0,
-2);var d=1*getStyle(document.getElementById(this.config.id),"height").slice(0,-2),c,b;1.25<a/d?(c=1.25*d,b=d):(c=a,b=a/1.25);var f=(a-c)/2,e=(d-b)/2,h=16<b/6.4?b/6.4:16,l=e+b/1.4;this.params={canvasW:a,canvasH:d,widgetW:c,widgetH:b,dx:f,dy:e,titleFontSize:10<b/8?b/10:10,titleX:f+c/2,titleY:e+b/6.5,valueFontSize:h,valueX:f+c/2,valueY:l,labelFontSize:10<b/16?b/16:10,labelX:f+c/2,labelY:l+h/2+6,minFontSize:10<b/16?b/16:10,minX:f+c/10+c/6.666666666666667*this.config.gaugeWidthScale/2,minY:e+b/1.126760563380282,
maxFontSize:10<b/16?b/16:10,maxX:f+c-c/10-c/6.666666666666667*this.config.gaugeWidthScale/2,maxY:e+b/1.126760563380282};this.canvas.customAttributes.pki=function(a,b,c,d,e,f,h,k){b=(1-(a-b)/(c-b))*Math.PI;a=d/2-d/10;k=a-d/6.666666666666667*k;c=d/2+f;var m=e/1.25+h,l=d/2+f+a*Math.cos(b),q=e-(e-m)+h-a*Math.sin(b);d=d/2+f+k*Math.cos(b);e=e-(e-m)+h-k*Math.sin(b);var g;g=g+("M"+(c-k)+","+m+" ")+("L"+(c-a)+","+m+" ");g+="A"+a+","+a+" 0 0,1 "+l+","+q+" ";g+="L"+d+","+e+" ";g+="A"+k+","+k+" 0 0,0 "+(c-k)+
","+m+" ";g+="z ";return{path:g}};this.gauge=this.canvas.path().attr({stroke:"none",fill:this.config.gaugeColor,pki:[this.config.max,this.config.min,this.config.max,this.params.widgetW,this.params.widgetH,this.params.dx,this.params.dy,this.config.gaugeWidthScale]});this.gauge.id=this.config.id+"-gauge";this.level=this.canvas.path().attr({stroke:"none",fill:getColorForPercentage((this.config.value-this.config.min)/(this.config.max-this.config.min),this.config.levelColors,this.config.levelColorsGradient),
pki:[this.config.min,this.config.min,this.config.max,this.params.widgetW,this.params.widgetH,this.params.dx,this.params.dy,this.config.gaugeWidthScale]});this.level.id=this.config.id+"-level";this.txtTitle=this.canvas.text(this.params.titleX,this.params.titleY,this.config.title);this.txtTitle.attr({"font-size":this.params.titleFontSize,"font-weight":"bold","font-family":"Arial",fill:this.config.titleFontColor,"fill-opacity":"1"});this.txtTitle.id=this.config.id+"-txttitle";this.txtValue=this.canvas.text(this.params.valueX,
this.params.valueY,this.originalValue);this.txtValue.attr({"font-size":this.params.valueFontSize,"font-weight":"bold","font-family":"Arial",fill:this.config.valueFontColor,"fill-opacity":"0"});this.txtValue.id=this.config.id+"-txtvalue";this.txtLabel=this.canvas.text(this.params.labelX,this.params.labelY,this.config.label);this.txtLabel.attr({"font-size":this.params.labelFontSize,"font-weight":"normal","font-family":"Arial",fill:this.config.labelFontColor,"fill-opacity":"0"});this.txtLabel.id=this.config.id+
"-txtlabel";this.txtMin=this.canvas.text(this.params.minX,this.params.minY,this.config.min);this.txtMin.attr({"font-size":this.params.minFontSize,"font-weight":"normal","font-family":"Arial",fill:this.config.labelFontColor,"fill-opacity":!0==this.config.showMinMax?"1":"0"});this.txtMin.id=this.config.id+"-txtmin";this.txtMax=this.canvas.text(this.params.maxX,this.params.maxY,this.config.max);this.txtMax.attr({"font-size":this.params.maxFontSize,"font-weight":"normal","font-family":"Arial",fill:this.config.labelFontColor,
"fill-opacity":!0==this.config.showMinMax?"1":"0"});this.txtMax.id=this.config.id+"-txtmax";a=this.canvas.canvas.childNodes[1];9>ie?onCreateElementNsReady(function(){this.generateShadow()}):this.generateShadow("http://www.w3.org/2000/svg",a);this.level.animate({pki:[this.config.value,this.config.min,this.config.max,this.params.widgetW,this.params.widgetH,this.params.dx,this.params.dy,this.config.gaugeWidthScale]},this.config.startAnimationTime,this.config.startAnimationType);this.txtValue.animate({"fill-opacity":"1"},
this.config.startAnimationTime,this.config.startAnimationType);this.txtLabel.animate({"fill-opacity":"1"},this.config.startAnimationTime,this.config.startAnimationType)};
JustGage.prototype.refresh=function(a){originalVal=a;a>this.config.max&&(a=this.config.max);a<this.config.min&&(a=this.config.min);var d=getColorForPercentage((a-this.config.min)/(this.config.max-this.config.min),this.config.levelColors,this.config.levelColorsGradient);this.canvas.getById(this.config.id+"-txtvalue").attr({text:originalVal});this.canvas.getById(this.config.id+"-level").animate({pki:[a,this.config.min,this.config.max,this.params.widgetW,this.params.widgetH,this.params.dx,this.params.dy,
this.config.gaugeWidthScale],fill:d},this.config.refreshAnimationTime,this.config.refreshAnimationType)};var percentColors=["#d9143b","#f9c802","#3db818"];
JustGage.prototype.generateShadow=function(a,d){var c=document.createElementNS(a,"filter");c.setAttribute("id",this.config.id+"-inner-shadow");d.appendChild(c);var b=document.createElementNS(a,"feOffset");b.setAttribute("dx",0);b.setAttribute("dy",this.config.shadowVerticalOffset);c.appendChild(b);b=document.createElementNS(a,"feGaussianBlur");b.setAttribute("result","offset-blur");b.setAttribute("stdDeviation",this.config.shadowSize);c.appendChild(b);b=document.createElementNS(a,"feComposite");b.setAttribute("operator",
"out");b.setAttribute("in","SourceGraphic");b.setAttribute("in2","offset-blur");b.setAttribute("result","inverse");c.appendChild(b);b=document.createElementNS(a,"feFlood");b.setAttribute("flood-color","black");b.setAttribute("flood-opacity",this.config.shadowOpacity);b.setAttribute("result","color");c.appendChild(b);b=document.createElementNS(a,"feComposite");b.setAttribute("operator","in");b.setAttribute("in","color");b.setAttribute("in2","inverse");b.setAttribute("result","shadow");c.appendChild(b);
b=document.createElementNS(a,"feComposite");b.setAttribute("operator","over");b.setAttribute("in","shadow");b.setAttribute("in2","SourceGraphic");c.appendChild(b);!0==this.config.showInnerShadow&&(this.canvas.canvas.childNodes[2].setAttribute("filter","url(#"+this.config.id+"-inner-shadow)"),this.canvas.canvas.childNodes[3].setAttribute("filter","url(#"+this.config.id+"-inner-shadow)"))};
var getColorForPercentage=function(a,d,c){var b=d.length;if(1===b)return d[0];for(var f=c?1/(b-1):1/b,b=[],e=0;e<d.length;e++){var h=c?f*e:f*(e+1),l=parseInt(cutHex(d[e]).substring(0,2),16),n=parseInt(cutHex(d[e]).substring(2,4),16),p=parseInt(cutHex(d[e]).substring(4,6),16);b[e]={pct:h,color:{r:l,g:n,b:p}}}if(0==a)return"rgb("+[b[0].color.r,b[0].color.g,b[0].color.b].join()+")";for(e=0;e<b.length;e++)if(a<=b[e].pct)return!0==c?(d=b[e-1],c=b[e],b=(a-d.pct)/(c.pct-d.pct),a=1-b,"rgb("+[Math.floor(d.color.r*
a+c.color.r*b),Math.floor(d.color.g*a+c.color.g*b),Math.floor(d.color.b*a+c.color.b*b)].join()+")"):"rgb("+[b[e].color.r,b[e].color.g,b[e].color.b].join()+")"};function getRandomInt(a,d){return Math.floor(Math.random()*(d-a+1))+a}function cutHex(a){return"#"==a.charAt(0)?a.substring(1,7):a}
function getStyle(a,d){var c="";document.defaultView&&document.defaultView.getComputedStyle?c=document.defaultView.getComputedStyle(a,"").getPropertyValue(d):a.currentStyle&&(d=d.replace(/\-(\w)/g,function(a,c){return c.toUpperCase()}),c=a.currentStyle[d]);return c}function onCreateElementNsReady(a){void 0!=document.createElementNS?a():setTimeout(function(){onCreateElementNsReady(a)},100)}
var ie=function(){for(var a=3,d=document.createElement("div"),c=d.getElementsByTagName("i");d.innerHTML="\x3c!--[if gt IE "+ ++a+"]\x3e\x3ci\x3e\x3c/i\x3e\x3c![endif]--\x3e",c[0];);return 4<a?a:void 0}();