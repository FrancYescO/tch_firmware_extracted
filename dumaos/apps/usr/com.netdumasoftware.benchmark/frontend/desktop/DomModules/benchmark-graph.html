<link rel="import" href="/themes/<%= current_theme %>/duma-theme.html?v=<%= dumaos_version %>&lang=<%= lang %>&theme=<%= current_theme %>&themeVersion=<%= current_theme_version %>"> <link rel="import" href="/custom-elements/duma-legend/duma-legend.html?v=<%= dumaos_version %>&lang=<%= lang %>&theme=<%= current_theme %>&themeVersion=<%= current_theme_version %>"> <link rel="import" href="/custom-elements/iron-flex-layout/iron-flex-layout.html?v=<%= dumaos_version %>&lang=<%= lang %>&theme=<%= current_theme %>&themeVersion=<%= current_theme_version %>"> <link rel="import" href="/custom-elements/iron-flex-layout/iron-flex-layout-classes.html?v=<%= dumaos_version %>&lang=<%= lang %>&theme=<%= current_theme %>&themeVersion=<%= current_theme_version %>"> <link rel="import" href="/apps/com.netdumasoftware.benchmark/desktop/DomModules/rating.html?v=<%= dumaos_version %>&lang=<%= lang %>&theme=<%= current_theme %>&themeVersion=<%= current_theme_version %>"> <link rel="import" href="/custom-elements/duma-chart/duma-chart.html?v=<%= dumaos_version %>&lang=<%= lang %>&theme=<%= current_theme %>&themeVersion=<%= current_theme_version %>"> <link rel="import" href="/custom-elements/paper-spinner/paper-spinner.html?v=<%= dumaos_version %>&lang=<%= lang %>&theme=<%= current_theme %>&themeVersion=<%= current_theme_version %>"> <link rel="import" href="/custom-elements/polymer/polymer.html?v=<%= dumaos_version %>&lang=<%= lang %>&theme=<%= current_theme %>&themeVersion=<%= current_theme_version %>"> <link rel="import" href="/libs/chart-extensions.html?v=<%= dumaos_version %>&lang=<%= lang %>&theme=<%= current_theme %>&themeVersion=<%= current_theme_version %>"> <dom-module id="benchmark-graph"> <template> <style is="custom-style" include="duma-theme iron-flex"> :host {
        @apply(--layout-vertical);
        @apply(--layout-flex-auto);
        flex-grow: 0;
        flex-shrink: 1;
        flex-basis: calc((100% - 32px) / 3);
        position: relative;
        background-color: rgba(var(--primary-background-rgb), 0.25);
        min-height: 0;
        height: 100%;
      }
      ::content .graphViewLayout {
        @apply(--layout-vertical);
        @apply(--layout-flex-auto);
        min-height: 0;
      }
      ::content .graphViewLayout > duma-legend {
        flex-wrap: wrap;
      }
      ::content .summaryLayout {
        flex-shrink: 0;
      }
      ::content #loadingSpinnerWrapper {
        position: absolute;
        top: 0;
        right: 0;
        width: 100%;
        height: 100%;
        @apply(--layout-horizontal);
        @apply(--layout-center);
        @apply(--layout-center-justified);
        background-color: rgba(var(--primary-background-rgb), 0.5);
      }
      ::content .chart-wrapper {
        @apply(--layout-flex);
        min-height: 256px;
      }
      ::content .graph-wrap duma-chart {}      
      ::content .graph-titlebar {
        @apply(--layout-horizontal);
        @apply(--layout-center);
        height: 56px;
        padding: 0 16px 0 8px;
      }
      ::content .circle_wrapper:hover .circle {
        stroke-opacity: 0.25;
      }      
      ::content .circle_wrapper:hover .circle-bg {
        fill-opacity: 0;
      }
      ::content #ratingPlaceholder ::content paper-tooltip {
        display: none;
      }
      ::content .graph-title {
        @apply(--layout-horizontal);
        @apply(--layout-center);
        @apply(--layout-flex-auto);
      }
      ::content .graph-titletext {
        @apply(--paper-font-subhead);
        margin-left: 8px;
      } </style> <!-- Module Body --> <!-- Header --> <div class="graph-titlebar"> <!-- Score and title --> <div class="graph-title"> <div id="ratingPlaceholder"></div> <div class="graph-titletext">[[graphTitle]]</div> </div> <!-- QoS --> <div class="graph-titleqos"> <!-- QoS [[qosString]] --> </div> </div> <!-- Body --> <div class="chart-wrapper" vertical> <!-- Summary --> <duma-legend id="[[graphId]]-summary" legend-stats="[[summaryInfo]]" justified dont-hide-legend-in-table-mode></duma-legend> <!-- Graph --> <duma-chart type="line" id="[[graphId]]-graph"></duma-chart> </div> <template is="dom-if" if="[[loading]]"> <div id="loadingSpinnerWrapper"> <paper-spinner-lite active></paper-spinner-lite> </div> </template> </template> <script> Polymer({
      is: 'benchmark-graph',
      properties: {
        graphId: String,
        graphTitle: String,
        summaryInfo: Array,
        ratingType: String,
        loading:
        {
          type: Boolean,
          value: false,
        },
        qosEnabled:
        {
          type:Boolean,
          value: false,
        },
        qosString:
        {
          value: String,
          computed: `getQoSString(qosEnabled)`,
        }
      },
      ready: function()
      {
        var rating = document.createElement("duma-" + this.graphId + "-rating");
        rating.id = this.graphId + "-rating";
        rating.animated = true;

        Polymer.dom(this.$.ratingPlaceholder).appendChild(rating);
      },
      setColour: function(index, colour)
      {
        var indexStr = index.toString();
        this.set(`summaryInfo.${indexStr}.colour`, colour);
        if (this.summaryInfo[indexStr] && this.summaryInfo[indexStr].bgColour != "")
          this.set(`summaryInfo.${indexStr}.bgColour`, colour);
      },
      setResult: function(index, result)
      {
        this.set(`summaryInfo.${index.toString()}.result`, result);
      },
      setLoading: function(value)
      {
        this.set(`loading`, value);
      },
      setQoS: function(value)
      {
        this.set(`qosEnabled`, !value);
      },
      getQoSString: function(value)
      {
        return (value) ? "<%= i18n.on %>" : "<%= i18n.off %>";
      }
    }); </script> </dom-module> 