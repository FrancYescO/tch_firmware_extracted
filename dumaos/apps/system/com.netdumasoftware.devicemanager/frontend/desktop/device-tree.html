<!--
  (C) 2016 NETDUMA Software
  Kian Cross
--> <%
require "libos"
local platform_information = os.platform_information()
%> <link rel="import" href="/custom-elements/polymer/polymer.html?v=<%= dumaos_version %>&lang=<%= lang %>&theme=<%= current_theme %>&themeVersion=<%= current_theme_version %>"> <link rel="import" href="/custom-elements/iron-flex-layout/iron-flex-layout-classes.html?v=<%= dumaos_version %>&lang=<%= lang %>&theme=<%= current_theme %>&themeVersion=<%= current_theme_version %>"> <link rel="import" href="/custom-elements/iron-flex-layout/iron-flex-layout.html?v=<%= dumaos_version %>&lang=<%= lang %>&theme=<%= current_theme %>&themeVersion=<%= current_theme_version %>"> <link rel="import" href="/custom-elements/duma-icon-tree/duma-icon-tree.html?v=<%= dumaos_version %>&lang=<%= lang %>&theme=<%= current_theme %>&themeVersion=<%= current_theme_version %>"> <link rel="import" href="/custom-elements/duma-device-edit/duma-device-edit.html?v=<%= dumaos_version %>&lang=<%= lang %>&theme=<%= current_theme %>&themeVersion=<%= current_theme_version %>"> <link rel="import" href="/custom-elements/duma-panels/duma-panel.html?v=<%= dumaos_version %>&lang=<%= lang %>&theme=<%= current_theme %>&themeVersion=<%= current_theme_version %>"> <link rel="import" href="/custom-elements/paper-radio-group/paper-radio-group.html?v=<%= dumaos_version %>&lang=<%= lang %>&theme=<%= current_theme %>&themeVersion=<%= current_theme_version %>"> <link rel="import" href="/custom-elements/duma-table/duma-table.html?v=<%= dumaos_version %>&lang=<%= lang %>&theme=<%= current_theme %>&themeVersion=<%= current_theme_version %>"> <link rel="import" href="/custom-elements/paper-button/paper-button.html?v=<%= dumaos_version %>&lang=<%= lang %>&theme=<%= current_theme %>&themeVersion=<%= current_theme_version %>"> <link rel="import" href="/custom-elements/duma-alert/duma-alert.html?v=<%= dumaos_version %>&lang=<%= lang %>&theme=<%= current_theme %>&themeVersion=<%= current_theme_version %>"> <link rel="import" href="/custom-elements/duma-clipboard-button/duma-clipboard-button.html?v=<%= dumaos_version %>&lang=<%= lang %>&theme=<%= current_theme %>&themeVersion=<%= current_theme_version %>"> <link rel="import" href="/custom-elements/paper-input/paper-textarea.html?v=<%= dumaos_version %>&lang=<%= lang %>&theme=<%= current_theme %>&themeVersion=<%= current_theme_version %>"> <link rel="import" href="/custom-elements/paper-spinner/paper-spinner-lite.html?v=<%= dumaos_version %>&lang=<%= lang %>&theme=<%= current_theme %>&themeVersion=<%= current_theme_version %>"> <link rel="import" href="/themes/<%= current_theme %>/duma-theme.html?v=<%= dumaos_version %>&lang=<%= lang %>&theme=<%= current_theme %>&themeVersion=<%= current_theme_version %>"> <link rel="import" href="/libs/rpc.html?v=<%= dumaos_version %>&lang=<%= lang %>&theme=<%= current_theme %>&themeVersion=<%= current_theme_version %>"> <link rel="import" href="/libs/storage.html?v=<%= dumaos_version %>&lang=<%= lang %>&theme=<%= current_theme %>&themeVersion=<%= current_theme_version %>"> <link rel="import" href="/libs/jquery.html?v=<%= dumaos_version %>&lang=<%= lang %>&theme=<%= current_theme %>&themeVersion=<%= current_theme_version %>"> <link rel="import" href="/libs/devices.html?v=<%= dumaos_version %>&lang=<%= lang %>&theme=<%= current_theme %>&themeVersion=<%= current_theme_version %>"> <link rel="import" href="/libs/cycle.html?v=<%= dumaos_version %>&lang=<%= lang %>&theme=<%= current_theme %>&themeVersion=<%= current_theme_version %>"> <link rel="import" href="/nd-css/duma-icons.html?v=<%= dumaos_version %>&lang=<%= lang %>&theme=<%= current_theme %>&themeVersion=<%= current_theme_version %>"> <% if platform_information.sdk == "OpenWRT" then %> <link rel="import" href="/apps/com.netdumasoftware.devicemanager/desktop/radio-scan.html?v=<%= dumaos_version %>&lang=<%= lang %>&theme=<%= current_theme %>&themeVersion=<%= current_theme_version %>"> <% end %> <style is="custom-style" include="iron-flex iron-positioning iron-flex-layout duma-theme"> :host {
    display: block;
  }
  #offline-delete {
    margin-top: 1em;
  }
  .wait-button:not([disabled]) ::content paper-spinner-lite {
    display: none;
  }
  .wait-button[disabled] ::content span {
    display: none;
  }
  .import-export {
    margin-top: 1em;
    margin-bottom:0.5em;
  }
  .import-export-dialog {
    width: 100%;
  }
  .import-export duma-clipboard-button ::content paper-tooltip ::content div {
    white-space: pre-line !important;
  } </style> <duma-panel id="device-tree-panel" header="<%= i18n.header %>" show-pin show-help show-help-tip show-drawer drawer-header="<%= i18n.options %>"> <div drawer> <paper-radio-group selected="tree" id="mode-selector" aria-label="<%= i18n.displayMode %>"> <paper-radio-button name="tree"><%= i18n.tree %></paper-radio-button> <paper-radio-button name="table"><%= i18n.table %></paper-radio-button> </paper-radio-group> <paper-button id="offline-delete" background><%= i18n.removeOfflineDevices %></paper-button> <div class="layout horizontal import-export"> <paper-button id="import-names-button"><%= i18n.importDeviceNames %></paper-button> <duma-clipboard-button id="export-names-button" tooltip="<%= i18n.downloadDeviceNames %>" download-as="DeviceNames.txt"></duma-clipboard-button> </div> <% if platform_information.sdk == "OpenWRT" then %> <paper-button id="scanOverrideButton" class="wait-button"> <span><%= i18n.wifiScan %></span> <paper-spinner-lite active></paper-spinner-lite> </paper-button> <% end %> <br> <paper-button id="flush-cloud"> <span><%= i18n.flushCloud %></span> </paper-button> </div> <div help-content> <p> <%= i18n.helpContent %> </p> </div> <div help-tip><%= i18n.helpTip %></div> <div main class="vertical"> <duma-icon-tree class="svg-container" id="device-tree"></duma-icon-tree> <div id="table-wrapper"> <template is="dom-bind" id="table-binder"> <style> #table-wrapper {
            width: 100%;
            height: 100%;
            display: flex;
            flex-direction: column;
          }
          #table-wrapper .dev-table-wrapper:not(:first-of-type){
            min-height: 256px;
            padding-top: 1em;
          }
          #table-wrapper .dev-table-wrapper duma-table{
            height: calc(100% - 28px);
          } </style> <div class="dev-table-wrapper" style="height: calc(60% - 1em);"> <div class="content" style="font-size:20px;font-weight:400;line-height:28px;"><%= i18n.devicesTable %></div> <duma-table items="[[devices]]" selection-enabled selection-has-popup id="devices-table" caption="<%= i18n.devicesTable %>"> <duma-table-column name="<%= i18n.name %>" bind-to="name"></duma-table-column> <duma-table-column name="<%= i18n.type %>" bind-to="type"></duma-table-column> <duma-table-column name="<%= i18n.macAddress %>" bind-to="mac"></duma-table-column> <duma-table-column name="<%= i18n.ipv4Address %>" bind-to="ips"></duma-table-column> <duma-table-column name="<%= i18n.connectionType %>" bind-to="connectionType"></duma-table-column> <duma-table-column name="<%= i18n.connectionStatus %>" bind-to="connectionStatusIndex"></duma-table-column> <duma-table-column name="<%= i18n.ssid %>" bind-to="ssidIndex"></duma-table-column> <duma-table-column name="<%= i18n.frequency %>" bind-to="frequency"></duma-table-column> <% if os.board() ~= "rb-951g-2hnd" then %> <duma-table-column name="<%= i18n.signalStrength %>" bind-to="signalStrength"></duma-table-column> <% end %> <template is="dom-if" if="[[arlTableAvailable]]"> <duma-table-column name="<%= i18n.portNumber %>" bind-to="portNumber"></duma-table-column> <duma-table-column name="<%= i18n.duplex %>" bind-to="duplexIndex"></duma-table-column> <duma-table-column name="<%= i18n.linkSpeed %>" bind-to="speed"></duma-table-column> </template> </duma-table> </div> <div class="dev-table-wrapper" style="height: 40%;"> <div class="content" style="font-size:20px;font-weight:400;line-height:28px;"><%= i18n.portsTable %></div> <duma-table items="[[ports]]" id="ports-table" caption="<%= i18n.portsTable %>"> <duma-table-column name="<%= i18n.portNumber %>" bind-to="portNumber"></duma-table-column> <duma-table-column name="<%= i18n.connectionStatus %>" bind-to="connectionStatus"></duma-table-column> <duma-table-column name="<%= i18n.duplex %>" bind-to="duplex"></duma-table-column> <duma-table-column name="<%= i18n.linkSpeed %>" bind-to="speed"></duma-table-column> </duma-table> </div> </template> </div> <% if platform_information.sdk == "OpenWRT" then %> <radio-scan button-override="#scanOverrideButton"></radio-scan> <% end %> <paper-dialog id="import-names-dialog" class="import-export-dialog"> <h2 dialog-label><%= i18n.importDeviceNames %></h2> <div dialog-desc><%= i18n.importDeviceNamesDescription %></div> <paper-dialog-scrollable> <div class="inner"> <paper-textarea id="import-textarea" rows="10"></paper-textarea> </div> </paper-dialog-scrollable> <div class="buttons"> <paper-button dialog-dismiss><%= i18n.close %></paper-button> <paper-button id="import-confirm"><%= i18n.import %></paper-button> </div> </paper-dialog> <duma-alert id="device-alert"></duma-alert> <duma-alert id="delete-offline-alert"><%= i18n.removeOfflineDevicesMessage %></duma-alert> <duma-device-edit id="device-edit"></duma-device-edit> </div> </duma-panel> <script src="/apps/com.netdumasoftware.devicemanager/desktop/device-tree.js?v=<%= dumaos_version %>&lang=<%= lang %>&theme=<%= current_theme %>&themeVersion=<%= current_theme_version %>"></script> 