    server {
        # ipv4
        listen       6698 ssl;
        listen       6699 ssl;

        # ipv6
        listen       [::]:6698 ssl;
        listen       [::]:6699 ssl;

        ssl_certificate /tmp/ssl/data/cert;
        ssl_certificate_key /tmp/ssl/data/pairing;
        # based on https://wiki.mozilla.org/Security/Server_Side_TLS
        ssl_protocols TLSv1 TLSv1.1 TLSv1.2;
        ssl_ciphers ECDHE-ECDSA-CHACHA20-POLY1305:ECDHE-RSA-CHACHA20-POLY1305:ECDHE-ECDSA-AES128-GCM-SHA256:ECDHE-RSA-AES128-GCM-SHA256:ECDHE-ECDSA-AES256-GCM-SHA384:ECDHE-RSA-AES256-GCM-SHA384:DHE-RSA-AES128-GCM-SHA256:DHE-RSA-AES256-GCM-SHA384:ECDHE-ECDSA-AES128-SHA256:ECDHE-RSA-AES128-SHA256:ECDHE-ECDSA-AES128-SHA:ECDHE-RSA-AES256-SHA384:ECDHE-RSA-AES128-SHA:ECDHE-ECDSA-AES256-SHA384:ECDHE-ECDSA-AES256-SHA:ECDHE-RSA-AES256-SHA:DHE-RSA-AES128-SHA256:DHE-RSA-AES128-SHA:DHE-RSA-AES256-SHA256:DHE-RSA-AES256-SHA:AES128-GCM-SHA256:AES256-GCM-SHA384:AES128-SHA256:AES256-SHA256:AES128-SHA:AES256-SHA:!DSS;
        ssl_prefer_server_ciphers on;
        ssl_session_tickets off;
        ssl_verify_client optional_no_ca;

        server_name  localhost;
        root /www/docroot;
        client_body_buffer_size 64k;

        location = /dashboard_datamodel.cgi {
            content_by_lua '
              require("generic.app").process()
            ';
        }

    }

