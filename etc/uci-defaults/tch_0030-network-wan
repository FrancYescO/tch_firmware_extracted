#!/bin/sh

. /lib/functions/uci-defaults.sh

#/*******************************************************************/
#/		vlan device definition as				*/
#/      eth4: wan
#/*******************************************************************/
uci set network.waneth4=device
uci set network.waneth4.type=8021q
uci set network.waneth4.name=waneth4
uci set network.waneth4.macaddr=`uci get env.rip.eth_mac`
uci set network.waneth4.ifname=eth4
uci set network.waneth4.vid=835

#/*******************************************************************/
#/		vlan device definition as				*/
#/      vdsl: wan
#/*******************************************************************/
uci set network.wanptm0=device
uci set network.wanptm0.type=8021q
uci set network.wanptm0.name=wanptm0
uci set network.wanptm0.macaddr=`uci get env.rip.eth_mac`
uci set network.wanptm0.ifname=ptm0
uci set network.wanptm0.vid=835


uci set network.wan=interface
uci set network.wan.auto='1'
uci set network.wan.proto=pppoe
uci set network.wan.demand=0
uci set network.wan.ifname='<set by script>'
uci set network.wan.keepalive=4,30
uci set network.wan.username=`uci get env.var.serial`-`uci get env.var.oui`@00000.agcombo.unica
uci set network.wan.password=alicenewag
uci set network.wan.graceful_restart='1'
uci set network.wan.macaddr=`uci get env.rip.eth_mac`
uci set network.wan.ipv6='0'
uci set network.wan.peerdns='1'
uci set network.wan.reqopts='1 3 6 15 33 42 51 121 249'
uci set network.config=config
uci set network.config.wan_mode='pppoe'
#to address NG-66145
uci set network.wan.keepalive_adaptive=0


uci set network.wwan=interface
uci set network.wwan.auto='1'

uci set network.wan6=interface
uci set network.wan6.ifname=@wan
uci set network.wan6.proto=dhcpv6
uci set network.wan6.reqopts='12 21 22 23 24 25 31 56 64 67 82 83'
uci set network.wan6.noslaaconly=1
uci set network.wan6.iface_464xlat='0'

uci commit network

exit 0
